<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Christmas Countdown</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@400;700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Default Theme Variables */
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --text-main: #ffffff;
            --text-accent: #fca5a5;
            --card-bg: rgba(255, 255, 255, 0.1);
            --card-border: rgba(255, 255, 255, 0.2);
            --snow-color: rgba(255, 255, 255, 0.8);
        }

        body {
            font-family: 'Nunito', sans-serif;
            overflow: hidden; /* Prevent scrolling */
            background: var(--bg-gradient);
            color: var(--text-main);
            transition: background 1s ease, color 0.5s ease;
            height: 100vh; /* Fix for mobile browser height */
            width: 100vw;
        }

        .christmas-font {
            font-family: 'Mountains of Christmas', cursive;
        }
        
        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--card-border);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.2);
            transition: all 0.5s ease;
        }

        /* --- Mascot Animations --- */
        .mascot-container {
            font-size: 5rem;
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.3));
            transition: all 0.5s ease;
            display: inline-block;
            will-change: transform;
            cursor: pointer;
        }
        
        .mascot-container:active {
            transform: scale(0.9) !important;
        }

        /* Animations */
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        @keyframes wobble { 0%, 100% { transform: rotate(-5deg); } 50% { transform: rotate(5deg); } }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes float { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-15px) rotate(5deg); } }
        @keyframes dance { 0%, 100% { transform: skew(0deg); } 25% { transform: skew(-10deg); } 75% { transform: skew(10deg); } }
        @keyframes pulse-glow { 0%, 100% { transform: scale(1); filter: drop-shadow(0 0 5px white); } 50% { transform: scale(1.1); filter: drop-shadow(0 0 20px yellow); } }

        .anim-bounce { animation: bounce 2s infinite ease-in-out; }
        .anim-wobble { animation: wobble 3s infinite ease-in-out; }
        .anim-spin { animation: spin 10s infinite linear; }
        .anim-float { animation: float 4s infinite ease-in-out; }
        .anim-dance { animation: dance 2s infinite cubic-bezier(0.4, 0, 0.2, 1); }
        .anim-pulse { animation: pulse-glow 2s infinite ease-in-out; }

        /* Theme Selector UI - Mobile Optimized */
        .theme-panel {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            pointer-events: none;
            transform: scale(0.95);
        }
        
        .theme-panel.open {
            opacity: 1;
            pointer-events: auto;
            transform: scale(1);
        }

        .theme-btn {
            transition: transform 0.2s;
        }
        .theme-btn:active {
            transform: scale(0.9);
        }
        
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
        .custom-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 4px; }

        .accent-text {
            color: var(--text-accent);
            transition: color 0.5s ease;
        }

        /* Responsive Text Sizing */
        @media (max-width: 640px) {
            .countdown-number { font-size: 2.5rem; }
            .countdown-label { font-size: 0.7rem; }
            .mascot-container { font-size: 4rem; }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center relative h-full w-full">

    <!-- Canvas for Snow Effect -->
    <canvas id="snowCanvas" class="absolute top-0 left-0 w-full h-full pointer-events-none z-0"></canvas>

    <!-- Theme Toggle Button (Top Right) -->
    <button onclick="toggleThemePanel()" class="absolute top-4 right-4 z-50 p-3 glass-card rounded-full hover:bg-white/20 active:scale-90 transition-all shadow-lg" title="Change Theme">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
            <circle cx="13.5" cy="6.5" r=".5"></circle>
            <circle cx="17.5" cy="10.5" r=".5"></circle>
            <circle cx="8.5" cy="7.5" r=".5"></circle>
            <circle cx="6.5" cy="12.5" r=".5"></circle>
            <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"></path>
        </svg>
    </button>

    <!-- Theme Panel (Centered Modal Style for Mobile) -->
    <div id="themePanelOverlay" onclick="toggleThemePanel()" class="fixed inset-0 bg-black/50 z-40 hidden backdrop-blur-sm"></div>
    <div id="themePanel" class="theme-panel fixed z-50 glass-card p-4 rounded-xl w-[90%] max-w-sm max-h-[70vh] overflow-y-auto custom-scroll flex flex-col gap-3 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 shadow-2xl border border-white/30">
        <div class="flex justify-between items-center border-b border-white/20 pb-2 mb-2">
            <h3 class="text-sm font-bold uppercase tracking-wider text-white">Select Theme</h3>
            <button onclick="toggleThemePanel()" class="text-white hover:text-red-300">âœ•</button>
        </div>
        <div class="grid grid-cols-3 gap-3" id="themeGrid">
            <!-- JS will populate this -->
        </div>
    </div>

    <!-- Main Content -->
    <div class="z-10 text-center px-4 w-full max-w-4xl transition-all duration-500 flex flex-col items-center justify-center h-full">
        
        <!-- Header Section -->
        <div class="flex flex-col items-center justify-center mb-6">
            <h1 class="christmas-font text-5xl md:text-7xl lg:text-8xl font-bold mb-2 drop-shadow-lg leading-tight">
                Christmas<br>Countdown
            </h1>
            <div class="text-sm md:text-xl accent-text font-bold tracking-widest uppercase mb-4">
                Time until Santa arrives
            </div>
            
            <!-- MASCOT -->
            <div id="themeMascot" class="mascot-container anim-float select-none" onclick="pokeMascot()">
                ðŸ¦‰
            </div>
        </div>

        <!-- Countdown Grid -->
        <div class="grid grid-cols-2 gap-3 w-full max-w-sm md:max-w-2xl">
            <!-- Days -->
            <div class="glass-card rounded-xl p-3 md:p-6 flex flex-col items-center justify-center">
                <span id="days" class="countdown-number text-4xl md:text-7xl font-bold mb-1 font-mono">00</span>
                <span class="countdown-label text-xs md:text-lg uppercase tracking-wider accent-text font-bold">Days</span>
            </div>
            <!-- Hours -->
            <div class="glass-card rounded-xl p-3 md:p-6 flex flex-col items-center justify-center">
                <span id="hours" class="countdown-number text-4xl md:text-7xl font-bold mb-1 font-mono">00</span>
                <span class="countdown-label text-xs md:text-lg uppercase tracking-wider accent-text font-bold">Hours</span>
            </div>
            <!-- Minutes -->
            <div class="glass-card rounded-xl p-3 md:p-6 flex flex-col items-center justify-center">
                <span id="minutes" class="countdown-number text-4xl md:text-7xl font-bold mb-1 font-mono">00</span>
                <span class="countdown-label text-xs md:text-lg uppercase tracking-wider accent-text font-bold">Minutes</span>
            </div>
            <!-- Seconds -->
            <div class="glass-card rounded-xl p-3 md:p-6 flex flex-col items-center justify-center">
                <span id="seconds" class="countdown-number text-4xl md:text-7xl font-bold accent-text mb-1 font-mono">00</span>
                <span class="countdown-label text-xs md:text-lg uppercase tracking-wider font-bold opacity-80">Seconds</span>
            </div>
        </div>

        <!-- Footer Message -->
        <div class="mt-8 text-xs md:text-base font-light glass-card inline-block px-6 py-2 rounded-full shadow-lg">
            <span class="mr-1">âœ¨</span> Wishing you joy <span class="ml-1">âœ¨</span>
        </div>

    </div>

    <script>
        // --- Theme Configuration ---
        const themes = [
            { name: "Silent Night", gradient: "linear-gradient(135deg, #0f172a 0%, #1e293b 100%)", textMain: "#ffffff", textAccent: "#fca5a5", cardBg: "rgba(255, 255, 255, 0.1)", snowColor: "rgba(255, 255, 255, 0.8)", preview: "#0f172a", mascot: "ðŸ¦‰", anim: "anim-float" },
            { name: "Santa's Suit", gradient: "linear-gradient(135deg, #991b1b 0%, #ef4444 100%)", textMain: "#ffffff", textAccent: "#fcd34d", cardBg: "rgba(0, 0, 0, 0.2)", snowColor: "rgba(255, 255, 255, 0.9)", preview: "#ef4444", mascot: "ðŸŽ…", anim: "anim-bounce" },
            { name: "Evergreen", gradient: "linear-gradient(135deg, #064e3b 0%, #10b981 100%)", textMain: "#ffffff", textAccent: "#86efac", cardBg: "rgba(0, 0, 0, 0.25)", snowColor: "rgba(255, 255, 255, 0.7)", preview: "#064e3b", mascot: "ðŸ¦Œ", anim: "anim-float" },
            { name: "Winter", gradient: "linear-gradient(135deg, #cffafe 0%, #3b82f6 100%)", textMain: "#1e3a8a", textAccent: "#2563eb", cardBg: "rgba(255, 255, 255, 0.4)", snowColor: "rgba(255, 255, 255, 1)", cardBorder: "rgba(255,255,255,0.8)", preview: "#cffafe", mascot: "â›„", anim: "anim-wobble" },
            { name: "Midnight Gold", gradient: "linear-gradient(135deg, #000000 0%, #434343 100%)", textMain: "#ffd700", textAccent: "#e2e8f0", cardBg: "rgba(255, 215, 0, 0.1)", snowColor: "rgba(255, 215, 0, 0.6)", preview: "#292929", mascot: "ðŸŽº", anim: "anim-pulse" },
            { name: "Candy Cane", gradient: "linear-gradient(135deg, #be123c 0%, #fda4af 50%, #be123c 100%)", textMain: "#ffffff", textAccent: "#fff1f2", cardBg: "rgba(255, 255, 255, 0.2)", snowColor: "rgba(255, 255, 255, 0.9)", preview: "repeating-linear-gradient(45deg, #be123c, #be123c 10px, #fda4af 10px, #fda4af 20px)", mascot: "ðŸ¬", anim: "anim-spin" },
            { name: "Aurora", gradient: "linear-gradient(135deg, #4c1d95 0%, #0891b2 100%)", textMain: "#ffffff", textAccent: "#22d3ee", cardBg: "rgba(0, 0, 0, 0.2)", snowColor: "rgba(165, 243, 252, 0.8)", preview: "#4c1d95", mascot: "ðŸ»â€â„ï¸", anim: "anim-float" },
            { name: "Hearth", gradient: "linear-gradient(135deg, #7c2d12 0%, #ea580c 100%)", textMain: "#fff7ed", textAccent: "#fbbf24", cardBg: "rgba(0, 0, 0, 0.2)", snowColor: "rgba(255, 237, 213, 0.6)", preview: "#ea580c", mascot: "ðŸ§¦", anim: "anim-wobble" },
            { name: "Gingerbread", gradient: "linear-gradient(135deg, #5d4037 0%, #8d6e63 100%)", textMain: "#ffffff", textAccent: "#a7f3d0", cardBg: "rgba(255, 255, 255, 0.15)", snowColor: "rgba(255, 235, 205, 0.7)", preview: "#5d4037", mascot: "ðŸª", anim: "anim-bounce" },
            { name: "Sugar Plum", gradient: "linear-gradient(135deg, #4a044e 0%, #c026d3 100%)", textMain: "#fae8ff", textAccent: "#f0abfc", cardBg: "rgba(255, 255, 255, 0.15)", snowColor: "rgba(245, 208, 254, 0.8)", preview: "#4a044e", mascot: "ðŸ§šâ€â™€ï¸", anim: "anim-spin" },
            { name: "Elf Workshop", gradient: "linear-gradient(135deg, #15803d 0%, #b91c1c 100%)", textMain: "#ffffff", textAccent: "#fde047", cardBg: "rgba(255, 255, 255, 0.2)", snowColor: "rgba(255, 255, 255, 0.9)", preview: "linear-gradient(45deg, #15803d 50%, #b91c1c 50%)", mascot: "ðŸ§", anim: "anim-dance" },
            { name: "Starry Night", gradient: "linear-gradient(135deg, #020617 0%, #172554 100%)", textMain: "#ffffff", textAccent: "#fde047", cardBg: "rgba(30, 58, 138, 0.3)", snowColor: "rgba(255, 255, 255, 0.6)", preview: "#020617", mascot: "ðŸŒ ", anim: "anim-pulse" },
            { name: "Frozen Lake", gradient: "linear-gradient(135deg, #ecfeff 0%, #0891b2 100%)", textMain: "#0e7490", textAccent: "#155e75", cardBg: "rgba(255, 255, 255, 0.6)", cardBorder: "rgba(255,255,255,0.9)", snowColor: "rgba(255, 255, 255, 1)", preview: "#ecfeff", mascot: "â›¸ï¸", anim: "anim-dance" },
            { name: "Rudolph", gradient: "linear-gradient(135deg, #451a03 0%, #7f1d1d 100%)", textMain: "#fef2f2", textAccent: "#f87171", cardBg: "rgba(0, 0, 0, 0.3)", snowColor: "rgba(255, 255, 255, 0.8)", preview: "#451a03", mascot: "ðŸ”´", anim: "anim-pulse" },
            { name: "Penguins", gradient: "linear-gradient(135deg, #1e293b 0%, #38bdf8 100%)", textMain: "#f0f9ff", textAccent: "#fdba74", cardBg: "rgba(255, 255, 255, 0.2)", snowColor: "rgba(255, 255, 255, 0.9)", preview: "#38bdf8", mascot: "ðŸ§", anim: "anim-bounce" }
        ];

        let currentSnowColor = "rgba(255, 255, 255, 0.8)";

        // --- Logic: Render Theme Buttons ---
        const themeGrid = document.getElementById('themeGrid');
        
        themes.forEach((theme, index) => {
            const btn = document.createElement('button');
            btn.className = `theme-btn w-full aspect-square rounded-lg shadow-md flex flex-col items-center justify-center gap-1 group relative overflow-hidden`;
            btn.style.background = theme.preview;
            btn.onclick = () => applyTheme(index);
            themeGrid.appendChild(btn);
        });

        function toggleThemePanel() {
            const panel = document.getElementById('themePanel');
            const overlay = document.getElementById('themePanelOverlay');
            
            if (panel.classList.contains('open')) {
                panel.classList.remove('open');
                overlay.classList.add('hidden');
            } else {
                panel.classList.add('open');
                overlay.classList.remove('hidden');
            }
        }

        function applyTheme(index) {
            const theme = themes[index];
            const root = document.documentElement;

            root.style.setProperty('--bg-gradient', theme.gradient);
            root.style.setProperty('--text-main', theme.textMain);
            root.style.setProperty('--text-accent', theme.textAccent);
            root.style.setProperty('--card-bg', theme.cardBg);
            root.style.setProperty('--snow-color', theme.snowColor);
            
            if(theme.cardBorder) {
                root.style.setProperty('--card-border', theme.cardBorder);
            } else {
                root.style.setProperty('--card-border', 'rgba(255,255,255,0.2)');
            }

            const mascotEl = document.getElementById('themeMascot');
            mascotEl.style.transform = "scale(0)"; // Shrink out
            setTimeout(() => {
                mascotEl.innerText = theme.mascot;
                mascotEl.className = `mascot-container ${theme.anim} select-none`;
                mascotEl.style.transform = "scale(1)"; // Grow in
            }, 300);

            currentSnowColor = theme.snowColor;
            toggleThemePanel(); // Close panel after selection
        }
        
        function pokeMascot() {
            const mascotEl = document.getElementById('themeMascot');
            mascotEl.style.transform = "scale(1.4) rotate(10deg)";
            setTimeout(() => mascotEl.style.transform = "", 200);
        }

        // --- Countdown Logic ---
        function updateCountdown() {
            const now = new Date();
            const currentYear = now.getFullYear();
            let christmas = new Date(currentYear, 11, 25); 

            if (now.getMonth() === 11 && now.getDate() > 25) {
                christmas.setFullYear(currentYear + 1);
            }

            const diff = christmas - now;
            const d = Math.floor(diff / 1000 / 60 / 60 / 24);
            const h = Math.floor((diff / 1000 / 60 / 60) % 24);
            const m = Math.floor((diff / 1000 / 60) % 60);
            const s = Math.floor((diff / 1000) % 60);

            document.getElementById('days').innerText = d < 10 ? '0' + d : d;
            document.getElementById('hours').innerText = h < 10 ? '0' + h : h;
            document.getElementById('minutes').innerText = m < 10 ? '0' + m : m;
            document.getElementById('seconds').innerText = s < 10 ? '0' + s : s;
        }
        setInterval(updateCountdown, 1000);
        updateCountdown();

        // --- Snowfall Logic ---
        const canvas = document.getElementById('snowCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];

        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
        }

        window.addEventListener('resize', resize);
        resize();

        class Particle {
            constructor() { this.reset(); }
            reset() {
                this.x = Math.random() * width;
                this.y = Math.random() * -height;
                this.velocity = Math.random() * 2 + 0.5;
                this.size = Math.random() * 2 + 1;
                this.wind = (Math.random() - 0.5) * 0.5;
            }
            update() {
                this.y += this.velocity;
                this.x += this.wind;
                if (this.y > height) this.reset();
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = currentSnowColor; 
                ctx.fill();
            }
        }

        function initParticles() {
            particles = [];
            const particleCount = Math.min(width * 0.2, 100);
            for (let i = 0; i < particleCount; i++) {
                const p = new Particle();
                p.y = Math.random() * height; 
                particles.push(p);
            }
        }

        function animate() {
            ctx.clearRect(0, 0, width, height);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animate);
        }

        initParticles();
        animate();
    </script>
</body>
</html>
