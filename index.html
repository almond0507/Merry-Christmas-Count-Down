<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Christmas Countdown</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@400;700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --text-main: #ffffff;
            --text-accent: #fca5a5;
            --card-bg: rgba(255, 255, 255, 0.1);
            --card-border: rgba(255, 255, 255, 0.2);
            --snow-color: rgba(255, 255, 255, 0.8);
        }

        /* RESET */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* Prevent scrolling completely */
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: var(--bg-gradient);
            color: var(--text-main);
            transition: background 1s ease, color 0.5s ease;
            
            /* KEY FIX: Vertical Centering */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .christmas-font { font-family: 'Mountains of Christmas', cursive; }

        /* --- FLUID SIZING (Adjusted for Desktop Compactness) --- */
        
        .main-title {
            /* Reduced max size to fit better on laptops */
            font-size: clamp(2.5rem, 7vmin, 5rem); 
            line-height: 1.1;
            text-shadow: 0 4px 10px rgba(0,0,0,0.3);
            margin-bottom: 1vh;
            text-align: center;
        }
        
        .sub-title {
            font-size: clamp(0.8rem, 2vmin, 1.2rem);
            letter-spacing: 0.3em;
            margin-bottom: 2vh;
            opacity: 0.9;
            text-align: center;
        }

        /* Mascot Container */
        .mascot-wrapper {
            height: 12vmin; 
            max-height: 120px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 2vh;
        }

        .fluid-mascot { 
            font-size: clamp(3.5rem, 10vmin, 6rem); 
            cursor: pointer; 
            user-select: none; 
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.3)); 
            will-change: transform; 
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        .fluid-mascot:active { transform: scale(0.9) !important; }

        /* Grid Layout */
        .countdown-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: clamp(8px, 1.5vmin, 20px);
            width: 90%;
            /* Reduced max-width significantly to save vertical space on desktop */
            max-width: 450px; 
        }

        /* Countdown Cards */
        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--card-border);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border-radius: 1.2rem;
            
            /* Made flatter (16/10) to take up less vertical space */
            aspect-ratio: 16/10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
            transition: transform 0.3s ease;
        }

        /* Numbers inside cards */
        .fluid-number { 
            /* Smaller font clamps */
            font-size: clamp(2rem, 6vmin, 3.5rem); 
            font-weight: 700; 
            line-height: 1; 
            font-family: monospace; 
        }
        .fluid-label { 
            font-size: clamp(0.6rem, 1.5vmin, 0.9rem); 
            text-transform: uppercase; 
            font-weight: 700; 
            margin-top: 4px; 
            opacity: 0.9;
        }

        /* Footer */
        .footer-pill {
            margin-top: 4vh;
            font-size: clamp(0.75rem, 1.5vmin, 0.9rem);
            padding: 0.5em 1.5em;
            border-radius: 50px;
            background: var(--card-bg);
            backdrop-filter: blur(5px);
            border: 1px solid var(--card-border);
        }

        /* --- Animations --- */
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        @keyframes wobble { 0%, 100% { transform: rotate(-5deg); } 50% { transform: rotate(5deg); } }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes float { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-15px) rotate(5deg); } }
        @keyframes pulse { 0%, 100% { transform: scale(1); filter: drop-shadow(0 0 5px white); } 50% { transform: scale(1.1); filter: drop-shadow(0 0 20px yellow); } }

        .anim-bounce { animation: bounce 2s infinite ease-in-out; }
        .anim-wobble { animation: wobble 3s infinite ease-in-out; }
        .anim-spin { animation: spin 10s infinite linear; }
        .anim-float { animation: float 4s infinite ease-in-out; }
        .anim-pulse { animation: pulse 2s infinite ease-in-out; }

        .accent-text { color: var(--text-accent); transition: color 0.5s ease; }

        /* --- Theme Modal --- */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
            z-index: 100; opacity: 0; pointer-events: none; transition: opacity 0.3s;
            display: flex; align-items: center; justify-content: center;
        }
        .modal-overlay.open { opacity: 1; pointer-events: auto; }
        
        .theme-modal {
            width: 90%; max-width: 380px; background: rgba(20, 20, 20, 0.95);
            border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; padding: 20px;
            max-height: 70vh; overflow-y: auto; transform: scale(0.95); transition: transform 0.3s;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .modal-overlay.open .theme-modal { transform: scale(1); }

        .theme-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        
        .theme-btn {
            width: 100%; aspect-ratio: 1; border-radius: 12px; border: none; cursor: pointer;
            transition: transform 0.2s, ring 0.2s; position: relative; overflow: hidden;
        }
        .theme-btn:hover { transform: scale(1.05); }
        .theme-btn:active { transform: scale(0.95); }
        
        /* Settings Button (Top Right) */
        .settings-btn {
            position: absolute; top: 20px; right: 20px; width: 44px; height: 44px;
            border-radius: 50%; background: rgba(255,255,255,0.1); backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.2); color: white;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
            z-index: 50; transition: background 0.2s;
        }
        .settings-btn:hover { background: rgba(255,255,255,0.25); }

    </style>
</head>
<body>

    <!-- Canvas Background -->
    <canvas id="snowCanvas" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0;"></canvas>

    <!-- Theme Toggle Button -->
    <button class="settings-btn" onclick="toggleThemePanel()" title="Change Theme">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="13.5" cy="6.5" r=".5"></circle>
            <circle cx="17.5" cy="10.5" r=".5"></circle>
            <circle cx="8.5" cy="7.5" r=".5"></circle>
            <circle cx="6.5" cy="12.5" r=".5"></circle>
            <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"></path>
        </svg>
    </button>

    <!-- Theme Selection Modal -->
    <div id="themePanelOverlay" class="modal-overlay" onclick="closeThemePanel(event)">
        <div class="theme-modal" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center border-b border-white/20 pb-3 mb-3">
                <h3 class="text-sm font-bold uppercase tracking-widest text-white">Select Theme</h3>
                <button onclick="toggleThemePanel()" class="text-white hover:text-red-400 font-bold px-2">âœ•</button>
            </div>
            <div class="theme-grid" id="themeGrid">
                <!-- Javascript will fill this -->
            </div>
        </div>
    </div>

    <!-- Main Content Centered Container -->
    <div class="z-10 w-full flex flex-col items-center justify-center p-4">
        
        <h1 class="christmas-font main-title">Christmas<br>Countdown</h1>
        <div class="sub-title accent-text">TIME UNTIL SANTA ARRIVES</div>
        
        <div class="mascot-wrapper">
            <div id="themeMascot" class="fluid-mascot anim-float" onclick="pokeMascot()">ðŸ¦‰</div>
        </div>

        <div class="countdown-grid">
            <div class="glass-card">
                <span id="days" class="fluid-number">00</span>
                <span class="fluid-label accent-text">Days</span>
            </div>
            <div class="glass-card">
                <span id="hours" class="fluid-number">00</span>
                <span class="fluid-label accent-text">Hours</span>
            </div>
            <div class="glass-card">
                <span id="minutes" class="fluid-number">00</span>
                <span class="fluid-label accent-text">Minutes</span>
            </div>
            <div class="glass-card">
                <span id="seconds" class="fluid-number accent-text">00</span>
                <span class="fluid-label" style="opacity: 0.8">Seconds</span>
            </div>
        </div>

        <div class="footer-pill">
            <span>âœ¨ Wishing you joy âœ¨</span>
        </div>

    </div>

    <script>
        // --- DATA ---
        const themes = [
            { name: "Silent Night", gradient: "linear-gradient(135deg, #0f172a 0%, #1e293b 100%)", textMain: "#ffffff", textAccent: "#fca5a5", cardBg: "rgba(255, 255, 255, 0.1)", snowColor: "rgba(255, 255, 255, 0.8)", preview: "#0f172a", mascot: "ðŸ¦‰", anim: "anim-float" },
            { name: "Santa's Suit", gradient: "linear-gradient(135deg, #991b1b 0%, #ef4444 100%)", textMain: "#ffffff", textAccent: "#fcd34d", cardBg: "rgba(0, 0, 0, 0.2)", snowColor: "rgba(255, 255, 255, 0.9)", preview: "#ef4444", mascot: "ðŸŽ…", anim: "anim-bounce" },
            { name: "Evergreen", gradient: "linear-gradient(135deg, #064e3b 0%, #10b981 100%)", textMain: "#ffffff", textAccent: "#86efac", cardBg: "rgba(0, 0, 0, 0.25)", snowColor: "rgba(255, 255, 255, 0.7)", preview: "#064e3b", mascot: "ðŸ¦Œ", anim: "anim-float" },
            { name: "Winter", gradient: "linear-gradient(135deg, #cffafe 0%, #3b82f6 100%)", textMain: "#1e3a8a", textAccent: "#2563eb", cardBg: "rgba(255, 255, 255, 0.4)", snowColor: "rgba(255, 255, 255, 1)", cardBorder: "rgba(255,255,255,0.8)", preview: "#cffafe", mascot: "â›„", anim: "anim-wobble" },
            { name: "Midnight Gold", gradient: "linear-gradient(135deg, #000000 0%, #434343 100%)", textMain: "#ffd700", textAccent: "#e2e8f0", cardBg: "rgba(255, 215, 0, 0.1)", snowColor: "rgba(255, 215, 0, 0.6)", preview: "#292929", mascot: "ðŸŽº", anim: "anim-pulse" },
            { name: "Candy Cane", gradient: "linear-gradient(135deg, #be123c 0%, #fda4af 50%, #be123c 100%)", textMain: "#ffffff", textAccent: "#fff1f2", cardBg: "rgba(255, 255, 255, 0.2)", snowColor: "rgba(255, 255, 255, 0.9)", preview: "repeating-linear-gradient(45deg, #be123c, #be123c 10px, #fda4af 10px, #fda4af 20px)", mascot: "ðŸ¬", anim: "anim-spin" },
            { name: "Aurora", gradient: "linear-gradient(135deg, #4c1d95 0%, #0891b2 100%)", textMain: "#ffffff", textAccent: "#22d3ee", cardBg: "rgba(0, 0, 0, 0.2)", snowColor: "rgba(165, 243, 252, 0.8)", preview: "#4c1d95", mascot: "ðŸ»â€â„ï¸", anim: "anim-float" },
            { name: "Hearth", gradient: "linear-gradient(135deg, #7c2d12 0%, #ea580c 100%)", textMain: "#fff7ed", textAccent: "#fbbf24", cardBg: "rgba(0, 0, 0, 0.2)", snowColor: "rgba(255, 237, 213, 0.6)", preview: "#ea580c", mascot: "ðŸ§¦", anim: "anim-wobble" },
            { name: "Gingerbread", gradient: "linear-gradient(135deg, #5d4037 0%, #8d6e63 100%)", textMain: "#ffffff", textAccent: "#a7f3d0", cardBg: "rgba(255, 255, 255, 0.15)", snowColor: "rgba(255, 235, 205, 0.7)", preview: "#5d4037", mascot: "ðŸª", anim: "anim-bounce" },
            { name: "Sugar Plum", gradient: "linear-gradient(135deg, #4a044e 0%, #c026d3 100%)", textMain: "#fae8ff", textAccent: "#f0abfc", cardBg: "rgba(255, 255, 255, 0.15)", snowColor: "rgba(245, 208, 254, 0.8)", preview: "#4a044e", mascot: "ðŸ§šâ€â™€ï¸", anim: "anim-spin" },
            { name: "Elf Workshop", gradient: "linear-gradient(135deg, #15803d 0%, #b91c1c 100%)", textMain: "#ffffff", textAccent: "#fde047", cardBg: "rgba(255, 255, 255, 0.2)", snowColor: "rgba(255, 255, 255, 0.9)", preview: "linear-gradient(45deg, #15803d 50%, #b91c1c 50%)", mascot: "ðŸ§", anim: "anim-dance" },
            { name: "Starry Night", gradient: "linear-gradient(135deg, #020617 0%, #172554 100%)", textMain: "#ffffff", textAccent: "#fde047", cardBg: "rgba(30, 58, 138, 0.3)", snowColor: "rgba(255, 255, 255, 0.6)", preview: "#020617", mascot: "ðŸŒ ", anim: "anim-pulse" },
            { name: "Frozen Lake", gradient: "linear-gradient(135deg, #ecfeff 0%, #0891b2 100%)", textMain: "#0e7490", textAccent: "#155e75", cardBg: "rgba(255, 255, 255, 0.6)", cardBorder: "rgba(255,255,255,0.9)", snowColor: "rgba(255, 255, 255, 1)", preview: "#ecfeff", mascot: "â›¸ï¸", anim: "anim-dance" },
            { name: "Rudolph", gradient: "linear-gradient(135deg, #451a03 0%, #7f1d1d 100%)", textMain: "#fef2f2", textAccent: "#f87171", cardBg: "rgba(0, 0, 0, 0.3)", snowColor: "rgba(255, 255, 255, 0.8)", preview: "#451a03", mascot: "ðŸ”´", anim: "anim-pulse" },
            { name: "Penguins", gradient: "linear-gradient(135deg, #1e293b 0%, #38bdf8 100%)", textMain: "#f0f9ff", textAccent: "#fdba74", cardBg: "rgba(255, 255, 255, 0.2)", snowColor: "rgba(255, 255, 255, 0.9)", preview: "#38bdf8", mascot: "ðŸ§", anim: "anim-bounce" },
             { name: "Present Surprise", gradient: "linear-gradient(135deg, #4338ca 0%, #a855f7 100%)", textMain: "#ffffff", textAccent: "#fde047", cardBg: "rgba(255, 255, 255, 0.15)", snowColor: "rgba(230, 230, 250, 0.8)", preview: "#a855f7", mascot: "ðŸŽ", anim: "anim-bounce" },
            { name: "Sleigh Ride", gradient: "linear-gradient(135deg, #881337 0%, #1e1b4b 100%)", textMain: "#ffe4e6", textAccent: "#fda4af", cardBg: "rgba(255, 255, 255, 0.1)", snowColor: "rgba(255, 255, 255, 0.7)", preview: "#881337", mascot: "ðŸ›·", anim: "anim-slide" }
        ];
        
        // --- RENDER ---
        const themeGrid = document.getElementById('themeGrid');
        themes.forEach((theme, idx) => {
            const btn = document.createElement('button');
            btn.className = 'theme-btn';
            btn.style.background = theme.preview;
            btn.onclick = () => applyTheme(idx);
            themeGrid.appendChild(btn);
        });

        // --- FUNCTIONS ---
        function toggleThemePanel() {
            document.getElementById('themePanelOverlay').classList.toggle('open');
        }
        function closeThemePanel(e) {
            if (e.target.id === 'themePanelOverlay') document.getElementById('themePanelOverlay').classList.remove('open');
        }
        function applyTheme(idx) {
            const t = themes[idx];
            const r = document.documentElement.style;
            r.setProperty('--bg-gradient', t.gradient);
            r.setProperty('--text-main', t.textMain);
            r.setProperty('--text-accent', t.textAccent);
            r.setProperty('--card-bg', t.cardBg);
            r.setProperty('--snow-color', t.snowColor);
            r.setProperty('--card-border', t.cardBorder || 'rgba(255,255,255,0.2)');
            
            const m = document.getElementById('themeMascot');
            m.style.transform = 'scale(0)';
            setTimeout(() => {
                m.innerText = t.mascot;
                m.className = `fluid-mascot ${t.anim}`;
                m.style.transform = 'scale(1)';
            }, 300);
            
            currentSnowColor = t.snowColor;
            toggleThemePanel();
        }
        function pokeMascot() {
            const m = document.getElementById('themeMascot');
            m.style.transform = 'scale(1.3) rotate(15deg)';
            setTimeout(() => m.style.transform = '', 200);
        }

        // --- COUNTDOWN ---
        function update() {
            const now = new Date();
            let year = now.getFullYear();
            let xmas = new Date(year, 11, 25);
            if (now.getMonth() === 11 && now.getDate() > 25) xmas.setFullYear(year + 1);
            
            const diff = xmas - now;
            const d = Math.floor(diff / (1000*60*60*24));
            const h = Math.floor((diff / (1000*60*60)) % 24);
            const m = Math.floor((diff / (1000*60)) % 60);
            const s = Math.floor((diff / 1000) % 60);
            
            document.getElementById('days').innerText = d < 10 ? '0'+d : d;
            document.getElementById('hours').innerText = h < 10 ? '0'+h : h;
            document.getElementById('minutes').innerText = m < 10 ? '0'+m : m;
            document.getElementById('seconds').innerText = s < 10 ? '0'+s : s;
        }
        setInterval(update, 1000); update();

        // --- SNOW ---
        const canvas = document.getElementById('snowCanvas');
        const ctx = canvas.getContext('2d');
        let width, height, particles = [];
        let currentSnowColor = "rgba(255, 255, 255, 0.8)";
        
        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            particles = [];
            const count = Math.min(width * 0.1, 80); 
            for(let i=0; i<count; i++) particles.push({
                x: Math.random()*width, y: Math.random()*height,
                v: Math.random()*2+0.5, s: Math.random()*2+1, w: Math.random()-0.5
            });
        }
        window.onresize = resize; resize();
        
        function animate() {
            ctx.clearRect(0,0,width,height);
            ctx.fillStyle = currentSnowColor;
            ctx.beginPath();
            particles.forEach(p => {
                p.y += p.v; p.x += p.w;
                if(p.y > height) p.y = -5;
                if(p.x > width) p.x = 0;
                if(p.x < 0) p.x = width;
                ctx.moveTo(p.x, p.y);
                ctx.arc(p.x, p.y, p.s, 0, Math.PI*2);
            });
            ctx.fill();
            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>
